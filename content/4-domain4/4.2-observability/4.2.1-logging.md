---
title: "4.2.1-4.2.8 Logging, Metrics, Tracing, Alerts"
date: 2025-02-11
weight: 1
---

## Logging vs Monitoring vs Observability

| | Logging | Monitoring | Observability |
|---|---|---|---|
| What | Record events | Track metrics | Understand system state |
| When | Reactive | Proactive | Both |
| Tools | CloudWatch Logs | CloudWatch Metrics/Alarms | Logs + Metrics + Traces |
| Question | "What happened?" | "Is it working?" | "Why is this happening?" |

## Structured Logging
```json
{
  "timestamp": "2025-01-15T10:30:00Z",
  "level": "INFO",
  "message": "Order created",
  "requestId": "abc-123",
  "userId": "user-456",
  "orderId": "order-789"
}
```

## Custom Metrics

### PutMetricData vs EMF

| | PutMetricData | EMF |
|---|---|---|
| Method | API call | Structured log |
| Cost | Per API call | Free (log ingestion only) |
| Latency | Extra network call | No extra call |
| Best for | EC2, ECS | Lambda |

## CloudWatch Alarms
- States: OK → ALARM → INSUFFICIENT_DATA
- Actions: SNS, Auto Scaling, EC2, Lambda
- Composite alarms: AND/OR multiple alarms

## X-Ray Tracing Setup

| Service | How to Enable |
|---------|--------------|
| Lambda | Active Tracing checkbox |
| API Gateway | Stage → X-Ray tracing |
| ECS | X-Ray daemon sidecar |
| EC2 | Install X-Ray daemon |

## Health Checks
- ECS: Container HEALTHCHECK + ALB health check
- Beanstalk: Basic (EC2 status) or Enhanced (app-level)
- Lambda: Monitor error rate, throttles, duration

{{% notice tip %}}
**Exam Tip:** EMF là preferred way để emit custom metrics từ Lambda — no extra API calls, no extra cost.
{{% /notice %}}
