---
title: "1.3.1-1.3.4 DynamoDB Core Concepts"
date: 2025-02-11
weight: 1
---

## Skill 1.3.1 — High-Cardinality Partition Keys

- Partition key quyết định data distribution
- **High cardinality** = nhiều unique values → balanced distribution
- ✅ Tốt: `user_id`, `order_id`, `session_id`
- ❌ Xấu: `status` (chỉ "active"/"inactive"), `date` (hot partition)

{{% notice warning %}}
Hot partition → throttling dù tổng capacity đủ. Adaptive capacity giúp nhưng không thay thế good key design.
{{% /notice %}}

## Skill 1.3.2 — Consistency Models

| | Strongly Consistent | Eventually Consistent |
|---|---|---|
| Data | Mới nhất | Có thể stale (~1s) |
| RCU | 1 RCU = 4KB | 0.5 RCU = 4KB |
| GSI | ❌ Không hỗ trợ | ✅ Default |
| LSI | ✅ Hỗ trợ | ✅ Default |
| Cách dùng | `ConsistentRead=true` | Default |

## Skill 1.3.3 — Query vs Scan

| | Query | Scan |
|---|---|---|
| Input | PK (bắt buộc) + SK (optional) | Không cần key |
| Performance | Efficient | Đọc TOÀN BỘ table |
| RCU | Chỉ matching items | Toàn bộ items |
| Use case | Production queries | Analytics/migration |

{{% notice info %}}
`FilterExpression` lọc SAU khi đọc → **KHÔNG giảm RCU consumed**. Luôn dùng Query thay vì Scan khi có thể.
{{% /notice %}}

## Skill 1.3.4 — Keys & Indexing

### Primary Key
- **Simple**: Partition Key (PK) only
- **Composite**: Partition Key (PK) + Sort Key (SK)

### GSI vs LSI

| | GSI | LSI |
|---|---|---|
| PK/SK | Khác main table | Cùng PK, SK khác |
| Throughput | Riêng (RCU/WCU) | Dùng main table |
| Consistency | Eventually only | Strongly + Eventually |
| Tạo khi nào | Bất kỳ lúc nào | Chỉ lúc tạo table |
| Limit | 20 per table | 5 per table |

{{% notice tip %}}
**Exam Tip:** GSI throttling có thể ảnh hưởng main table writes. LSI có item collection size limit 10GB per partition key.
{{% /notice %}}
