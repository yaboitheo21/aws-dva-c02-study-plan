---
title: "1.2.2-1.2.7 Configuration, Lifecycle, Performance"
date: 2025-02-11
weight: 2
---

## Skill 1.2.2 — Lambda Configuration

### Key Parameters

| Parameter | Range | Ghi chú |
|-----------|-------|---------|
| Memory | 128MB → 10,240MB | Tăng memory = tăng CPU |
| Timeout | 1s → 900s (15 min) | API Gateway max 29s |
| Ephemeral Storage | 512MB → 10,240MB | /tmp directory |
| Layers | Max 5 | Total unzipped ≤ 250MB |
| Env Variables | Max 4KB total | Có thể encrypt bằng KMS |

### Triggers & Destinations
- **Triggers**: API Gateway, S3, SQS, SNS, EventBridge, Kinesis, DynamoDB Streams
- **Destinations**: On success/failure → SQS, SNS, Lambda, EventBridge

## Skill 1.2.3 — Event Lifecycle & Error Handling

| Invocation Type | Retry Behavior | Error Handling |
|----------------|----------------|----------------|
| Synchronous | Caller retry | Caller nhận error |
| Asynchronous | 2 retries (tổng 3) | DLQ hoặc Destinations |
| Event Source Mapping (SQS) | Visibility timeout | Batch item failures |
| Event Source Mapping (Kinesis) | Until success/expiry | Bisect batch, max retry |

{{% notice info %}}
**Destinations vs DLQ:** Destinations linh hoạt hơn — hỗ trợ cả on-success và on-failure, nhiều target types hơn. DLQ chỉ cho failures.
{{% /notice %}}

## Skill 1.2.5 — Lambda Integration

### Permissions
- **Execution Role**: Lambda cần permissions để GỌI AWS services
- **Resource-based Policy**: Cho phép AWS services INVOKE Lambda

## Skill 1.2.6 — Performance Tuning

### Cold Start Mitigation
1. Provisioned Concurrency (pre-warm containers)
2. Giữ deployment package nhỏ
3. Init code ngoài handler (chỉ chạy 1 lần per container)

### Best Practices
```python
# GOOD: SDK client ngoài handler (reuse across invocations)
import boto3
dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('Orders')

def handler(event, context):
    return table.get_item(Key={'id': event['id']})
```

### Concurrency

| Type | Mô tả | Use Case |
|------|--------|----------|
| Unreserved | Shared pool | Default |
| Reserved | Guaranteed + capped | Protect critical functions |
| Provisioned | Pre-initialized | Eliminate cold starts |

## Skill 1.2.7 — Real-Time Data Processing
- Kinesis → Lambda: Batch size, parallelization factor, tumbling windows
- DynamoDB Streams → Lambda: INSERT, MODIFY, REMOVE events
- SQS → Lambda: Batch size, batch window, report batch item failures

{{% notice tip %}}
**Exam Tip:** Lambda Power Tuning tool giúp tìm optimal memory setting. Tăng memory = tăng CPU proportionally.
{{% /notice %}}
