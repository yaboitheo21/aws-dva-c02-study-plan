---
title: "3.4.3 Update Existing IaC Templates"
date: 2025-02-11
weight: 3
---

## Update Existing IaC Templates

### CloudFormation Change Sets

```bash
# Create change set (preview)
aws cloudformation create-change-set \
  --stack-name my-stack \
  --template-body file://template.yaml \
  --change-set-name update-v2

# Review changes
aws cloudformation describe-change-set \
  --change-set-name update-v2 --stack-name my-stack

# Execute
aws cloudformation execute-change-set \
  --change-set-name update-v2 --stack-name my-stack
```

### Stack Policies (Protect Resources)

```json
{
  "Statement": [{
    "Effect": "Deny",
    "Action": "Update:Replace",
    "Principal": "*",
    "Resource": "LogicalResourceId/ProductionDB"
  }]
}
```

### SAM Update

```bash
sam build
sam deploy  # Automatically creates change set
```

### CDK Update

```bash
cdk diff    # Preview changes
cdk deploy  # Apply changes
```

### Nested Stacks

```yaml
Resources:
  VPCStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://s3.amazonaws.com/bucket/vpc.yaml
```

{{% notice tip %}}
**Exam Tip:** Change Sets = preview before update. Stack Policies protect critical resources. `cdk diff` = preview CDK changes.
{{% /notice %}}
